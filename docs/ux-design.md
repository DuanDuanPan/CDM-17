---
title: UX 设计方案 — 脑图驱动协同研发平台（桌面版）
date: 2025-12-12
owner: Enjoyjavapan
scope: MVP + 增强项 R18–R24
status: draft
---

## 目标与约束
- 仅桌面 Web；无移动端同等要求。
- 性能：1k+ 节点、50 并发下交互 P95 <100ms；协同 <200ms；导出中等规模 P95<3s；访问记录查询 P95<2s。
- 安全：密级/字段/附件权限、默认水印、敏感遮罩、审计可导出；分享需密级校验。
- 易用：低摩擦创建（/命令、粘贴成树、AI 骨架）、可见协同、可复用模板/片段。

## 信息架构（桌面）
- 顶栏：项目切换、搜索、全局快捷键入口 `?`、用户/密级指示、状态页入口。
- 左侧：导航（项目/收藏/最近）、模板/片段抽屉（可展开搜索/预览）。
- 画布：多视图标签（脑图/甘特/时间轴/看板）；自由模式切换按钮；视口级网格/吸附开关。
- 右侧面板（可折叠）：属性（含密级提示）、版本/时间线、依赖/任务、AI Assist、审批推演、访问记录、评论（可停靠底部）。
- 底部：通知收件箱（过滤、已读/未读）、评论抽屉（线程+@）。
- 分享/导出弹窗：格式/范围/水印/遮罩/有效期设置，显示预估大小与风险提示。

## 关键流（桌面）
1) 快速建图：`/` 打开命令面板 → 选择“粘贴成树”或“AI 骨架” → 预览树 → 插入 → 自动定位新分支。
2) 应用模板/片段：左侧模板抽屉搜索 → 预览字段/密级预置 → 插入到选中节点 → 校验权限失败则提示申请提升。
3) 协同编辑：多光标可见；节点锁定/解锁；冲突提示；评论 @mention 触发节流站内信；未读评论高亮。
4) 导出：点击“导出” → 选择格式（PDF/PNG/Word/Markdown/纯文/ZIP）+ 范围（全图/选中子树）+ 水印/遮罩开关 → 显示预估时长/大小 → 导出完成提示 + 下载链接；写审计。
5) 分享：生成只读/可评论链接 → 系统校验密级 → 默认水印开启 → 可设有效期/失效 → 访问者写入访问记录。
6) 访问记录：右侧“访问记录” → 过滤时间/事件/密级 → 导出 CSV/JSON；失败时提示分页降级。
7) 自由布局：切换自由模式 → 启用吸附/网格/对齐线 → 拖拽节点；一键回到树/逻辑保留状态。

## 关键界面与组件
- 命令面板：模糊搜索动作/模板/快捷键；可键盘导航；顶部展示当前密级。
- 模板/片段卡片：显示结构预览、必填字段、默认密级；“插入”按钮；无权限时提供“申请提升”。
- 画布控制条（自由模式）：吸附、网格、对齐线、重排到树、性能提示（FPS/节点计数）。
- 评论面板：线程化、@mention、未读标记、筛选（节点/人/时间）、一键折叠。
- 导出/分享对话框：左侧格式选择，右侧范围+水印+遮罩+有效期；底部显示审计将记录的字段。
- 访问记录视图：列表/时间线切换；列含事件、主体、资源、密级、IP、时间；导出按钮。
- 权限提示：无权限字段/附件以遮罩+“申请提升”入口；顶部水印条显示当前用户/时间/IP。

## 交互细节（对应 R18–R24）
- R18 自由布局：网格/吸附/对齐线开关；拖拽实时对齐提示；状态保存在布局模型。
- R19 模板/片段：搜索+标签过滤；插入前显示将覆盖/新增的字段；保存子树为片段时可设默认密级。
- R20 协同可见性：光标标签显示用户；@mention 触发节流站内信；评论未读计数；冲突弹框提供“手动合并”入口。
- R21 导出遮罩：选择敏感字段遮罩策略（隐藏/模糊）；默认水印开启；范围下拉（全图/当前子树）；导出失败重试/分片。
- R22 访问记录：右侧面板可过滤（时间/事件/密级）；导出 CSV/JSON；分页防超时；数据写入 append-only。
- R23 快速上手：/命令、粘贴预览（可编辑树）、AI 骨架（可回收）；快捷键提示悬浮层。
- R24 分享联动：生成链接时检查密级；默认水印；一键失效；分享列表展示访问次数与最后访问时间。

## 状态与空态
- 无权限：字段/附件遮罩并展示“申请提升”按钮；水印仍显示。
- 大负载：提示“性能保护模式”并提供只读切换；保留操作日志。
- 无评论/无访问记录：友好空态卡片 + 快捷入口（邀请、生成分享链接、开启导出）。

## 可用性与无障碍
- 全键盘可达：命令面板、对话框、侧栏可用 Tab/快捷键操作。
- 颜色对比：满足 WCAG AA；水印不遮挡文字可读性。
- 状态提示：导出/分享/审计操作有进度与完成 toast，失败给重试与降级选项。

## 依赖与前置
- 依赖权限网关、审计链路、访问记录索引、模板服务、导出服务、分享链接管理。
- 性能监测埋点：布局交互、导出耗时、分享生成/失效耗时、访问记录查询耗时。
